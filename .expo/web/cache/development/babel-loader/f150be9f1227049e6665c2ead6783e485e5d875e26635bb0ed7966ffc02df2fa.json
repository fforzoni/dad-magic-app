{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport io from 'socket.io-client';\nvar SocketService = function () {\n  function SocketService() {\n    _classCallCheck(this, SocketService);\n    this.socket = null;\n    this.isConnected = false;\n    this.roomId = null;\n    this.onMovieSelectedCallback = null;\n  }\n  return _createClass(SocketService, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this = this;\n      var roomId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default-room';\n      try {\n        var SOCKET_SERVER_URL = 'http://localhost:3001';\n        this.socket = io(SOCKET_SERVER_URL, {\n          transports: ['websocket'],\n          autoConnect: true\n        });\n        this.roomId = roomId;\n        this.socket.on('connect', function () {\n          console.log('Connected to socket server');\n          _this.isConnected = true;\n          _this.socket.emit('join-room', {\n            roomId: _this.roomId\n          });\n        });\n        this.socket.on('disconnect', function () {\n          console.log('Disconnected from socket server');\n          _this.isConnected = false;\n        });\n        this.socket.on('error', function (error) {\n          console.error('Socket error:', error);\n        });\n        this.socket.on('movie-selected', function (data) {\n          console.log('Movie selected by another client:', data);\n          if (_this.onMovieSelectedCallback) {\n            _this.onMovieSelectedCallback(data.movie);\n          }\n        });\n        this.socket.on('room-joined', function (data) {\n          console.log('Joined room:', data.roomId);\n        });\n        this.socket.on('client-joined', function (data) {\n          console.log('Client joined room:', data.clientId);\n        });\n        this.socket.on('client-left', function (data) {\n          console.log('Client left room:', data.clientId);\n        });\n      } catch (error) {\n        console.error('Error connecting to socket server:', error);\n      }\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n        this.isConnected = false;\n      }\n    }\n  }, {\n    key: \"selectMovie\",\n    value: function selectMovie(movie) {\n      if (this.socket && this.isConnected) {\n        var data = {\n          roomId: this.roomId,\n          movie: movie,\n          timestamp: Date.now(),\n          clientId: this.socket.id\n        };\n        this.socket.emit('select-movie', data);\n        console.log('Sent movie selection:', movie.title);\n      } else {\n        console.warn('Socket not connected. Cannot send movie selection.');\n      }\n    }\n  }, {\n    key: \"onMovieSelected\",\n    value: function onMovieSelected(callback) {\n      this.onMovieSelectedCallback = callback;\n    }\n  }, {\n    key: \"getConnectionStatus\",\n    value: function getConnectionStatus() {\n      return this.isConnected;\n    }\n  }, {\n    key: \"getRoomId\",\n    value: function getRoomId() {\n      return this.roomId;\n    }\n  }, {\n    key: \"changeRoom\",\n    value: function changeRoom(newRoomId) {\n      if (this.socket && this.isConnected) {\n        this.socket.emit('leave-room', {\n          roomId: this.roomId\n        });\n        this.roomId = newRoomId;\n        this.socket.emit('join-room', {\n          roomId: this.roomId\n        });\n        console.log('Changed to room:', newRoomId);\n      }\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(message) {\n      if (this.socket && this.isConnected) {\n        var data = {\n          roomId: this.roomId,\n          message: message,\n          timestamp: Date.now(),\n          clientId: this.socket.id\n        };\n        this.socket.emit('send-message', data);\n      }\n    }\n  }, {\n    key: \"onMessage\",\n    value: function onMessage(callback) {\n      if (this.socket) {\n        this.socket.on('receive-message', callback);\n      }\n    }\n  }]);\n}();\nexport var socketService = new SocketService();","map":{"version":3,"names":["io","SocketService","_classCallCheck","socket","isConnected","roomId","onMovieSelectedCallback","_createClass","key","value","connect","_this","arguments","length","undefined","SOCKET_SERVER_URL","transports","autoConnect","on","console","log","emit","error","data","movie","clientId","disconnect","selectMovie","timestamp","Date","now","id","title","warn","onMovieSelected","callback","getConnectionStatus","getRoomId","changeRoom","newRoomId","sendMessage","message","onMessage","socketService"],"sources":["/Users/francescaforzoni/Downloads/Dad_MagicApp_002/src/services/socketService.js"],"sourcesContent":["import io from 'socket.io-client';\n\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.isConnected = false;\n    this.roomId = null;\n    this.onMovieSelectedCallback = null;\n  }\n\n  // Connect to the socket server\n  connect(roomId = 'default-room') {\n    try {\n      // Replace with your actual socket server URL\n      const SOCKET_SERVER_URL = 'http://localhost:3001';\n      \n      this.socket = io(SOCKET_SERVER_URL, {\n        transports: ['websocket'],\n        autoConnect: true,\n      });\n\n      this.roomId = roomId;\n\n      this.socket.on('connect', () => {\n        console.log('Connected to socket server');\n        this.isConnected = true;\n        \n        // Join the room\n        this.socket.emit('join-room', { roomId: this.roomId });\n      });\n\n      this.socket.on('disconnect', () => {\n        console.log('Disconnected from socket server');\n        this.isConnected = false;\n      });\n\n      this.socket.on('error', (error) => {\n        console.error('Socket error:', error);\n      });\n\n      // Listen for movie selection from other clients\n      this.socket.on('movie-selected', (data) => {\n        console.log('Movie selected by another client:', data);\n        if (this.onMovieSelectedCallback) {\n          this.onMovieSelectedCallback(data.movie);\n        }\n      });\n\n      // Listen for room join confirmation\n      this.socket.on('room-joined', (data) => {\n        console.log('Joined room:', data.roomId);\n      });\n\n      // Listen for other clients joining the room\n      this.socket.on('client-joined', (data) => {\n        console.log('Client joined room:', data.clientId);\n      });\n\n      // Listen for other clients leaving the room\n      this.socket.on('client-left', (data) => {\n        console.log('Client left room:', data.clientId);\n      });\n\n    } catch (error) {\n      console.error('Error connecting to socket server:', error);\n    }\n  }\n\n  // Disconnect from the socket server\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n      this.isConnected = false;\n    }\n  }\n\n  // Send movie selection to other clients in the room\n  selectMovie(movie) {\n    if (this.socket && this.isConnected) {\n      const data = {\n        roomId: this.roomId,\n        movie: movie,\n        timestamp: Date.now(),\n        clientId: this.socket.id,\n      };\n      \n      this.socket.emit('select-movie', data);\n      console.log('Sent movie selection:', movie.title);\n    } else {\n      console.warn('Socket not connected. Cannot send movie selection.');\n    }\n  }\n\n  // Set callback for when a movie is selected by another client\n  onMovieSelected(callback) {\n    this.onMovieSelectedCallback = callback;\n  }\n\n  // Get connection status\n  getConnectionStatus() {\n    return this.isConnected;\n  }\n\n  // Get current room ID\n  getRoomId() {\n    return this.roomId;\n  }\n\n  // Change room\n  changeRoom(newRoomId) {\n    if (this.socket && this.isConnected) {\n      // Leave current room\n      this.socket.emit('leave-room', { roomId: this.roomId });\n      \n      // Join new room\n      this.roomId = newRoomId;\n      this.socket.emit('join-room', { roomId: this.roomId });\n      \n      console.log('Changed to room:', newRoomId);\n    }\n  }\n\n  // Send custom message to room\n  sendMessage(message) {\n    if (this.socket && this.isConnected) {\n      const data = {\n        roomId: this.roomId,\n        message: message,\n        timestamp: Date.now(),\n        clientId: this.socket.id,\n      };\n      \n      this.socket.emit('send-message', data);\n    }\n  }\n\n  // Listen for custom messages\n  onMessage(callback) {\n    if (this.socket) {\n      this.socket.on('receive-message', callback);\n    }\n  }\n}\n\n// Export a singleton instance\nexport const socketService = new SocketService();\n"],"mappings":";;AAAA,OAAOA,EAAE,MAAM,kBAAkB;AAAC,IAE5BC,aAAa;EACjB,SAAAA,cAAA,EAAc;IAAAC,eAAA,OAAAD,aAAA;IACZ,IAAI,CAACE,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,uBAAuB,GAAG,IAAI;EACrC;EAAC,OAAAC,YAAA,CAAAN,aAAA;IAAAO,GAAA;IAAAC,KAAA,EAGD,SAAAC,OAAOA,CAAA,EAA0B;MAAA,IAAAC,KAAA;MAAA,IAAzBN,MAAM,GAAAO,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,cAAc;MAC7B,IAAI;QAEF,IAAMG,iBAAiB,GAAG,uBAAuB;QAEjD,IAAI,CAACZ,MAAM,GAAGH,EAAE,CAACe,iBAAiB,EAAE;UAClCC,UAAU,EAAE,CAAC,WAAW,CAAC;UACzBC,WAAW,EAAE;QACf,CAAC,CAAC;QAEF,IAAI,CAACZ,MAAM,GAAGA,MAAM;QAEpB,IAAI,CAACF,MAAM,CAACe,EAAE,CAAC,SAAS,EAAE,YAAM;UAC9BC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;UACzCT,KAAI,CAACP,WAAW,GAAG,IAAI;UAGvBO,KAAI,CAACR,MAAM,CAACkB,IAAI,CAAC,WAAW,EAAE;YAAEhB,MAAM,EAAEM,KAAI,CAACN;UAAO,CAAC,CAAC;QACxD,CAAC,CAAC;QAEF,IAAI,CAACF,MAAM,CAACe,EAAE,CAAC,YAAY,EAAE,YAAM;UACjCC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;UAC9CT,KAAI,CAACP,WAAW,GAAG,KAAK;QAC1B,CAAC,CAAC;QAEF,IAAI,CAACD,MAAM,CAACe,EAAE,CAAC,OAAO,EAAE,UAACI,KAAK,EAAK;UACjCH,OAAO,CAACG,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACvC,CAAC,CAAC;QAGF,IAAI,CAACnB,MAAM,CAACe,EAAE,CAAC,gBAAgB,EAAE,UAACK,IAAI,EAAK;UACzCJ,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEG,IAAI,CAAC;UACtD,IAAIZ,KAAI,CAACL,uBAAuB,EAAE;YAChCK,KAAI,CAACL,uBAAuB,CAACiB,IAAI,CAACC,KAAK,CAAC;UAC1C;QACF,CAAC,CAAC;QAGF,IAAI,CAACrB,MAAM,CAACe,EAAE,CAAC,aAAa,EAAE,UAACK,IAAI,EAAK;UACtCJ,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEG,IAAI,CAAClB,MAAM,CAAC;QAC1C,CAAC,CAAC;QAGF,IAAI,CAACF,MAAM,CAACe,EAAE,CAAC,eAAe,EAAE,UAACK,IAAI,EAAK;UACxCJ,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEG,IAAI,CAACE,QAAQ,CAAC;QACnD,CAAC,CAAC;QAGF,IAAI,CAACtB,MAAM,CAACe,EAAE,CAAC,aAAa,EAAE,UAACK,IAAI,EAAK;UACtCJ,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEG,IAAI,CAACE,QAAQ,CAAC;QACjD,CAAC,CAAC;MAEJ,CAAC,CAAC,OAAOH,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC5D;IACF;EAAC;IAAAd,GAAA;IAAAC,KAAA,EAGD,SAAAiB,UAAUA,CAAA,EAAG;MACX,IAAI,IAAI,CAACvB,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAACuB,UAAU,CAAC,CAAC;QACxB,IAAI,CAACvB,MAAM,GAAG,IAAI;QAClB,IAAI,CAACC,WAAW,GAAG,KAAK;MAC1B;IACF;EAAC;IAAAI,GAAA;IAAAC,KAAA,EAGD,SAAAkB,WAAWA,CAACH,KAAK,EAAE;MACjB,IAAI,IAAI,CAACrB,MAAM,IAAI,IAAI,CAACC,WAAW,EAAE;QACnC,IAAMmB,IAAI,GAAG;UACXlB,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBmB,KAAK,EAAEA,KAAK;UACZI,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;UACrBL,QAAQ,EAAE,IAAI,CAACtB,MAAM,CAAC4B;QACxB,CAAC;QAED,IAAI,CAAC5B,MAAM,CAACkB,IAAI,CAAC,cAAc,EAAEE,IAAI,CAAC;QACtCJ,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEI,KAAK,CAACQ,KAAK,CAAC;MACnD,CAAC,MAAM;QACLb,OAAO,CAACc,IAAI,CAAC,oDAAoD,CAAC;MACpE;IACF;EAAC;IAAAzB,GAAA;IAAAC,KAAA,EAGD,SAAAyB,eAAeA,CAACC,QAAQ,EAAE;MACxB,IAAI,CAAC7B,uBAAuB,GAAG6B,QAAQ;IACzC;EAAC;IAAA3B,GAAA;IAAAC,KAAA,EAGD,SAAA2B,mBAAmBA,CAAA,EAAG;MACpB,OAAO,IAAI,CAAChC,WAAW;IACzB;EAAC;IAAAI,GAAA;IAAAC,KAAA,EAGD,SAAA4B,SAASA,CAAA,EAAG;MACV,OAAO,IAAI,CAAChC,MAAM;IACpB;EAAC;IAAAG,GAAA;IAAAC,KAAA,EAGD,SAAA6B,UAAUA,CAACC,SAAS,EAAE;MACpB,IAAI,IAAI,CAACpC,MAAM,IAAI,IAAI,CAACC,WAAW,EAAE;QAEnC,IAAI,CAACD,MAAM,CAACkB,IAAI,CAAC,YAAY,EAAE;UAAEhB,MAAM,EAAE,IAAI,CAACA;QAAO,CAAC,CAAC;QAGvD,IAAI,CAACA,MAAM,GAAGkC,SAAS;QACvB,IAAI,CAACpC,MAAM,CAACkB,IAAI,CAAC,WAAW,EAAE;UAAEhB,MAAM,EAAE,IAAI,CAACA;QAAO,CAAC,CAAC;QAEtDc,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEmB,SAAS,CAAC;MAC5C;IACF;EAAC;IAAA/B,GAAA;IAAAC,KAAA,EAGD,SAAA+B,WAAWA,CAACC,OAAO,EAAE;MACnB,IAAI,IAAI,CAACtC,MAAM,IAAI,IAAI,CAACC,WAAW,EAAE;QACnC,IAAMmB,IAAI,GAAG;UACXlB,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBoC,OAAO,EAAEA,OAAO;UAChBb,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;UACrBL,QAAQ,EAAE,IAAI,CAACtB,MAAM,CAAC4B;QACxB,CAAC;QAED,IAAI,CAAC5B,MAAM,CAACkB,IAAI,CAAC,cAAc,EAAEE,IAAI,CAAC;MACxC;IACF;EAAC;IAAAf,GAAA;IAAAC,KAAA,EAGD,SAAAiC,SAASA,CAACP,QAAQ,EAAE;MAClB,IAAI,IAAI,CAAChC,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAACe,EAAE,CAAC,iBAAiB,EAAEiB,QAAQ,CAAC;MAC7C;IACF;EAAC;AAAA;AAIH,OAAO,IAAMQ,aAAa,GAAG,IAAI1C,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}