<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ IMDB-Style Customer View - Dad's Magic Movie App</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f0f0f;
            color: white;
            line-height: 1.6;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #f5c518 0%, #f4d03f 100%);
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(245, 197, 24, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            color: #000;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .logo .emoji {
            font-size: 3rem;
        }

        .search-container {
            flex: 1;
            max-width: 500px;
            margin: 0 40px;
        }

        .search-bar {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            background: rgba(255,255,255,0.9);
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .search-bar:focus {
            outline: none;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .magician-link {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .magician-link:hover {
            transform: translateY(-2px);
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Featured Section */
        .featured-section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 2rem;
            color: #f5c518;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .featured-movies {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px 0;
            scrollbar-width: none;
        }

        .featured-movies::-webkit-scrollbar {
            display: none;
        }

        .featured-movie {
            min-width: 300px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .featured-movie:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            border-color: #f5c518;
        }

        .featured-movie img {
            width: 100%;
            height: 450px;
            object-fit: cover;
        }

        .featured-movie-info {
            padding: 20px;
        }

        .featured-movie-info h3 {
            color: #f5c518;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .featured-movie-info p {
            color: #ccc;
            margin-bottom: 5px;
        }

        .rating {
            color: #f5c518;
            font-weight: bold;
        }

        /* Genre Sections */
        .genre-section {
            margin-bottom: 50px;
        }

        .genre-movies {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .movie-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            border-color: #f5c518;
        }

        .movie-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .movie-card-info {
            padding: 15px;
        }

        .movie-card-info h4 {
            color: #f5c518;
            font-size: 1rem;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .movie-card-info p {
            color: #ccc;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        /* Movie Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            position: relative;
            border: 2px solid #f5c518;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: #f5c518;
            transition: color 0.2s;
        }

        .close:hover {
            color: #e74c3c;
        }

        .modal-header {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            align-items: flex-start;
        }

        .modal-poster {
            width: 150px;
            height: 225px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-info h2 {
            color: #f5c518;
            font-size: 1.8rem;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .modal-info p {
            color: #ccc;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .modal-actions {
            text-align: center;
            margin-top: 25px;
        }

        .select-btn {
            background: linear-gradient(45deg, #f5c518, #f4d03f);
            color: #000;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 8px 25px rgba(245, 197, 24, 0.3);
        }

        .select-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(245, 197, 24, 0.4);
        }

        /* Connection Status */
        .connection-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .connection-status.disconnected {
            background: rgba(231, 76, 60, 0.9);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }

            .search-container {
                margin: 0;
                max-width: 100%;
            }

            .featured-movies {
                gap: 15px;
            }

            .featured-movie {
                min-width: 250px;
            }

            .genre-movies {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }

            .modal-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="emoji">üé¨</div>
                <h1>Dad's Magic Movies</h1>
            </div>
            
            <div class="search-container">
                <input type="text" class="search-bar" placeholder="Search movies..." id="searchBar">
            </div>
            
            <a href="magician.html" class="magician-link">üé© Magician View</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Featured Movies Section -->
        <section class="featured-section">
            <h2 class="section-title">
                <span>‚≠ê</span>
                Featured Movies
            </h2>
            <div class="featured-movies" id="featuredMovies">
                <!-- Featured movies will be loaded here -->
            </div>
        </section>

        <!-- Action Movies Section -->
        <section class="genre-section">
            <h2 class="section-title">
                <span>üí•</span>
                Action & Adventure
            </h2>
            <div class="genre-movies" id="actionMovies">
                <!-- Action movies will be loaded here -->
            </div>
        </section>

        <!-- Drama Movies Section -->
        <section class="genre-section">
            <h2 class="section-title">
                <span>üé≠</span>
                Drama & Classics
            </h2>
            <div class="genre-movies" id="dramaMovies">
                <!-- Drama movies will be loaded here -->
            </div>
        </section>

        <!-- Comedy Movies Section -->
        <section class="genre-section">
            <h2 class="section-title">
                <span>üòÇ</span>
                Comedy & Fun
            </h2>
            <div class="genre-movies" id="comedyMovies">
                <!-- Comedy movies will be loaded here -->
            </div>
        </section>
    </main>

    <!-- Movie Modal -->
    <div id="movieModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <img id="modalPoster" class="modal-poster" src="" alt="">
                <div class="modal-info">
                    <h2 id="modalTitle"></h2>
                    <p id="modalYear"></p>
                    <p id="modalRating"></p>
                    <p id="modalGenre"></p>
                </div>
            </div>
            <div class="modal-actions">
                <button class="select-btn" onclick="selectMovie()">üéØ Select This Movie</button>
            </div>
        </div>
    </div>

    <!-- Connection Status -->
    <div class="connection-status" id="connectionStatus">
        üîå Connected to Magician
    </div>

    <script>
        // Movie data organized by genre
        const movieData = {
            featured: [
                {
                    title: "The Shawshank Redemption",
                    year: "1994",
                    poster: "https://image.tmdb.org/t/p/w500/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg",
                    rating: "9.3",
                    genre: "Drama"
                },
                {
                    title: "The Godfather",
                    year: "1972",
                    poster: "https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg",
                    rating: "9.2",
                    genre: "Crime/Drama"
                },
                {
                    title: "The Dark Knight",
                    year: "2008",
                    poster: "https://image.tmdb.org/t/p/w500/qJ2tW6WMUDux911r6m7haRef0WH.jpg",
                    rating: "9.0",
                    genre: "Action/Drama"
                },
                {
                    title: "Pulp Fiction",
                    year: "1994",
                    poster: "https://image.tmdb.org/t/p/w500/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg",
                    rating: "8.9",
                    genre: "Crime/Drama"
                }
            ],
            action: [
                {
                    title: "Gladiator",
                    year: "2000",
                    poster: "https://image.tmdb.org/t/p/w500/6WBIuCWMmSS2bLu2u6XbVwu7cdn.jpg",
                    rating: "8.5",
                    genre: "Action/Drama"
                },
                {
                    title: "The Matrix",
                    year: "1999",
                    poster: "https://image.tmdb.org/t/p/w500/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg",
                    rating: "8.7",
                    genre: "Action/Sci-Fi"
                },
                {
                    title: "Top Gun",
                    year: "1986",
                    poster: "https://image.tmdb.org/t/p/w500/xu9zaAevzQ5nnrsXN6JcahjnG0S.jpg",
                    rating: "6.9",
                    genre: "Action/Drama"
                },
                {
                    title: "The Bourne Identity",
                    year: "2002",
                    poster: "https://image.tmdb.org/t/p/w500/rmeLqyLsM2zQ0iKARu3TbplM9Q6.jpg",
                    rating: "7.9",
                    genre: "Action/Thriller"
                }
            ],
            drama: [
                {
                    title: "Schindler's List",
                    year: "1993",
                    poster: "https://image.tmdb.org/t/p/w500/sF1U4EUQS8YHUAHk6zpd9RCkzL2.jpg",
                    rating: "8.9",
                    genre: "Biography/Drama"
                },
                {
                    title: "Forrest Gump",
                    year: "1994",
                    poster: "https://image.tmdb.org/t/p/w500/saHP97rTPS5eLmrLQEcANmKrsFl.jpg",
                    rating: "8.8",
                    genre: "Drama/Romance"
                },
                {
                    title: "Interstellar",
                    year: "2014",
                    poster: "https://image.tmdb.org/t/p/w500/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg",
                    rating: "8.6",
                    genre: "Adventure/Drama"
                },
                {
                    title: "The Silence of the Lambs",
                    year: "1991",
                    poster: "https://image.tmdb.org/t/p/w500/rplLJ2hPcOQmkFhTqUte0MkEaO2.jpg",
                    rating: "8.6",
                    genre: "Crime/Drama"
                }
            ],
            comedy: [
                {
                    title: "Fight Club",
                    year: "1999",
                    poster: "https://image.tmdb.org/t/p/w500/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg",
                    rating: "8.8",
                    genre: "Drama/Thriller"
                },
                {
                    title: "Liar Liar",
                    year: "1997",
                    poster: "https://image.tmdb.org/t/p/w500/pSgXKPIYsDQlxu5mnzLF3Lq3uWV.jpg",
                    rating: "6.8",
                    genre: "Comedy"
                },
                {
                    title: "Spirited Away",
                    year: "2001",
                    poster: "https://image.tmdb.org/t/p/w500/39wmItIWwg5sZMyRUHzk6qaWR4w.jpg",
                    rating: "8.6",
                    genre: "Animation/Adventure"
                },
                {
                    title: "Coco",
                    year: "2017",
                    poster: "https://image.tmdb.org/t/p/w500/gGEsBPAijhVUFoiNpgZXqRVWJt2.jpg",
                    rating: "8.4",
                    genre: "Animation/Adventure"
                }
            ]
        };

        let currentMovie = null;
        let socket = null;

        // Initialize the app
        function initApp() {
            loadMovies();
            setupSocket();
            setupSearch();
        }

        // Load movies into their respective sections
        function loadMovies() {
            loadSection('featuredMovies', movieData.featured);
            loadSection('actionMovies', movieData.action);
            loadSection('dramaMovies', movieData.drama);
            loadSection('comedyMovies', movieData.comedy);
        }

        // Load movies into a specific section
        function loadSection(sectionId, movies) {
            const section = document.getElementById(sectionId);
            section.innerHTML = '';

            movies.forEach(movie => {
                const movieElement = createMovieElement(movie);
                section.appendChild(movieElement);
            });
        }

        // Create a movie element
        function createMovieElement(movie) {
            const movieDiv = document.createElement('div');
            movieDiv.className = sectionId.includes('featured') ? 'featured-movie' : 'movie-card';
            movieDiv.onclick = () => showMovieModal(movie);

            movieDiv.innerHTML = `
                <img src="${movie.poster}" alt="${movie.title}" onerror="this.src='https://via.placeholder.com/300x450/333/666?text=Movie'">
                <div class="${sectionId.includes('featured') ? 'featured-movie-info' : 'movie-card-info'}">
                    <h4>${movie.title}</h4>
                    <p>${movie.year} ‚Ä¢ ${movie.genre}</p>
                    <p class="rating">‚≠ê ${movie.rating}</p>
                </div>
            `;

            return movieDiv;
        }

        // Show movie modal
        function showMovieModal(movie) {
            currentMovie = movie;
            document.getElementById('modalPoster').src = movie.poster;
            document.getElementById('modalTitle').textContent = movie.title;
            document.getElementById('modalYear').textContent = `Year: ${movie.year}`;
            document.getElementById('modalRating').textContent = `Rating: ‚≠ê ${movie.rating}`;
            document.getElementById('modalGenre').textContent = `Genre: ${movie.genre}`;
            
            document.getElementById('movieModal').style.display = 'block';
        }

        // Close modal
        function closeModal() {
            document.getElementById('movieModal').style.display = 'none';
            currentMovie = null;
        }

        // Select movie (send to magician)
        function selectMovie() {
            if (currentMovie && socket) {
                socket.emit('movieSelected', {
                    title: currentMovie.title,
                    year: currentMovie.year,
                    poster: currentMovie.poster,
                    rating: currentMovie.rating,
                    genre: currentMovie.genre
                });

                // Show success message
                const btn = document.querySelector('.select-btn');
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Movie Sent!';
                btn.style.background = 'linear-gradient(45deg, #27ae60, #2ecc71)';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = 'linear-gradient(45deg, #f5c518, #f4d03f)';
                }, 2000);

                closeModal();
            }
        }

        // Setup socket connection
        function setupSocket() {
            socket = io('http://192.168.1.99:3001');

            socket.on('connect', () => {
                console.log('Connected to socket server');
                document.getElementById('connectionStatus').textContent = 'üîå Connected to Magician';
                document.getElementById('connectionStatus').classList.remove('disconnected');
            });

            socket.on('disconnect', () => {
                console.log('Disconnected from socket server');
                document.getElementById('connectionStatus').textContent = '‚ùå Disconnected from Magician';
                document.getElementById('connectionStatus').classList.add('disconnected');
            });
        }

        // Setup search functionality
        function setupSearch() {
            const searchBar = document.getElementById('searchBar');
            searchBar.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                searchMovies(searchTerm);
            });
        }

        // Search movies
        function searchMovies(searchTerm) {
            if (searchTerm.length < 2) {
                loadMovies(); // Show all movies if search is too short
                return;
            }

            const allMovies = [
                ...movieData.featured,
                ...movieData.action,
                ...movieData.drama,
                ...movieData.comedy
            ];

            const filteredMovies = allMovies.filter(movie =>
                movie.title.toLowerCase().includes(searchTerm) ||
                movie.genre.toLowerCase().includes(searchTerm)
            );

            // Show search results in all sections
            loadSection('featuredMovies', filteredMovies);
            loadSection('actionMovies', filteredMovies);
            loadSection('dramaMovies', filteredMovies);
            loadSection('comedyMovies', filteredMovies);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('movieModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
